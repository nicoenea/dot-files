var Zepto=function(){var e,t,$,n,i,r,o=[],a=o.slice,s=o.filter,c=window.document,u={},l={},f={"column-count":1,columns:1,"font-weight":1,"line-height":1,opacity:1,"z-index":1,zoom:1},d=/^\s*<(\w+|!)[^>]*>/,h=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,p=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,g=/^(?:body|html)$/i,m=/([A-Z])/g,v=["val","css","html","text","data","width","height","offset"],y=c.createElement("table"),w=c.createElement("tr"),b={tr:c.createElement("tbody"),tbody:y,thead:y,tfoot:y,td:w,th:w,"*":c.createElement("div")},x=/complete|loaded|interactive/,C=/^[\w-]*$/,S={},E=S.toString,j={},T=c.createElement("div"),M={tabindex:"tabIndex",readonly:"readOnly",for:"htmlFor",class:"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"},O=Array.isArray||function(e){return e instanceof Array};function k(e){return null==e?String(e):S[E.call(e)]||"object"}function L(e){return"function"==k(e)}function P(e){return null!=e&&e==e.window}function A(e){return null!=e&&e.nodeType==e.DOCUMENT_NODE}function D(e){return"object"==k(e)}function N(e){return D(e)&&!P(e)&&Object.getPrototypeOf(e)==Object.prototype}function F(e){return"number"==typeof e.length}function R(e){return e.replace(/::/g,"/").replace(/([A-Z]+)([A-Z][a-z])/g,"$1_$2").replace(/([a-z\d])([A-Z])/g,"$1_$2").replace(/_/g,"-").toLowerCase()}function z(e){return e in l?l[e]:l[e]=new RegExp("(^|\\s)"+e+"(\\s|$)")}function H(e,t){return"number"!=typeof t||f[R(e)]?t:t+"px"}function B(e){return"children"in e?a.call(e.children):$.map(e.childNodes,function(e){if(1==e.nodeType)return e})}function I(e,t){return null==t?$(e):$(e).filter(t)}function X(e,t,n,i){return L(t)?t.call(e,n,i):t}function _(e,t,n){null==n?e.removeAttribute(t):e.setAttribute(t,n)}function U(t,n){var i=t.className,r=i&&i.baseVal!==e;if(n===e)return r?i.baseVal:i;r?i.baseVal=n:t.className=n}function J(e){var t;try{return e?"true"==e||"false"!=e&&("null"==e?null:/^0/.test(e)||isNaN(t=Number(e))?/^[\[\{]/.test(e)?$.parseJSON(e):e:t):e}catch(t){return e}}return j.matches=function(e,t){if(!t||!e||1!==e.nodeType)return!1;var n=e.webkitMatchesSelector||e.mozMatchesSelector||e.oMatchesSelector||e.matchesSelector;if(n)return n.call(e,t);var i,r=e.parentNode,o=!r;return o&&(r=T).appendChild(e),i=~j.qsa(r,t).indexOf(e),o&&T.removeChild(e),i},i=function(e){return e.replace(/-+(.)?/g,function(e,t){return t?t.toUpperCase():""})},r=function(e){return s.call(e,function(t,n){return e.indexOf(t)==n})},j.fragment=function(t,n,i){var r,o,s;return h.test(t)&&(r=$(c.createElement(RegExp.$1))),r||(t.replace&&(t=t.replace(p,"<$1></$2>")),n===e&&(n=d.test(t)&&RegExp.$1),n in b||(n="*"),(s=b[n]).innerHTML=""+t,r=$.each(a.call(s.childNodes),function(){s.removeChild(this)})),N(i)&&(o=$(r),$.each(i,function(e,t){v.indexOf(e)>-1?o[e](t):o.attr(e,t)})),r},j.Z=function(e,t){return(e=e||[]).__proto__=$.fn,e.selector=t||"",e},j.isZ=function(e){return e instanceof j.Z},j.init=function(t,n){var i,r;if(!t)return j.Z();if("string"==typeof t)if("<"==(t=t.trim())[0]&&d.test(t))i=j.fragment(t,RegExp.$1,n),t=null;else{if(n!==e)return $(n).find(t);i=j.qsa(c,t)}else{if(L(t))return $(c).ready(t);if(j.isZ(t))return t;if(O(t))r=t,i=s.call(r,function(e){return null!=e});else if(D(t))i=[t],t=null;else if(d.test(t))i=j.fragment(t.trim(),RegExp.$1,n),t=null;else{if(n!==e)return $(n).find(t);i=j.qsa(c,t)}}return j.Z(i,t)},($=function(e,t){return j.init(e,t)}).extend=function(n){var i,r=a.call(arguments,1);return"boolean"==typeof n&&(i=n,n=r.shift()),r.forEach(function(r){!function n(i,r,o){for(t in r)o&&(N(r[t])||O(r[t]))?(N(r[t])&&!N(i[t])&&(i[t]={}),O(r[t])&&!O(i[t])&&(i[t]=[]),n(i[t],r[t],o)):r[t]!==e&&(i[t]=r[t])}(n,r,i)}),n},j.qsa=function(e,t){var n,i="#"==t[0],r=!i&&"."==t[0],o=i||r?t.slice(1):t,s=C.test(o);return A(e)&&s&&i?(n=e.getElementById(o))?[n]:[]:1!==e.nodeType&&9!==e.nodeType?[]:a.call(s&&!i?r?e.getElementsByClassName(o):e.getElementsByTagName(t):e.querySelectorAll(t))},$.contains=c.documentElement.contains?function(e,t){return e!==t&&e.contains(t)}:function(e,t){for(;t&&(t=t.parentNode);)if(t===e)return!0;return!1},$.type=k,$.isFunction=L,$.isWindow=P,$.isArray=O,$.isPlainObject=N,$.isEmptyObject=function(e){var t;for(t in e)return!1;return!0},$.inArray=function(e,t,n){return o.indexOf.call(t,e,n)},$.camelCase=i,$.trim=function(e){return null==e?"":String.prototype.trim.call(e)},$.uuid=0,$.support={},$.expr={},$.map=function(e,t){var n,i,r,o,a=[];if(F(e))for(i=0;i<e.length;i++)null!=(n=t(e[i],i))&&a.push(n);else for(r in e)null!=(n=t(e[r],r))&&a.push(n);return(o=a).length>0?$.fn.concat.apply([],o):o},$.each=function(e,t){var n,i;if(F(e)){for(n=0;n<e.length;n++)if(!1===t.call(e[n],n,e[n]))return e}else for(i in e)if(!1===t.call(e[i],i,e[i]))return e;return e},$.grep=function(e,t){return s.call(e,t)},window.JSON&&($.parseJSON=JSON.parse),$.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(e,t){S["[object "+t+"]"]=t.toLowerCase()}),$.fn={forEach:o.forEach,reduce:o.reduce,push:o.push,sort:o.sort,indexOf:o.indexOf,concat:o.concat,map:function(e){return $($.map(this,function(t,n){return e.call(t,n,t)}))},slice:function(){return $(a.apply(this,arguments))},ready:function(e){return x.test(c.readyState)&&c.body?e($):c.addEventListener("DOMContentLoaded",function(){e($)},!1),this},get:function(t){return t===e?a.call(this):this[t>=0?t:t+this.length]},toArray:function(){return this.get()},size:function(){return this.length},remove:function(){return this.each(function(){null!=this.parentNode&&this.parentNode.removeChild(this)})},each:function(e){return o.every.call(this,function(t,n){return!1!==e.call(t,n,t)}),this},filter:function(e){return L(e)?this.not(this.not(e)):$(s.call(this,function(t){return j.matches(t,e)}))},add:function(e,t){return $(r(this.concat($(e,t))))},is:function(e){return this.length>0&&j.matches(this[0],e)},not:function(t){var n=[];if(L(t)&&t.call!==e)this.each(function(e){t.call(this,e)||n.push(this)});else{var i="string"==typeof t?this.filter(t):F(t)&&L(t.item)?a.call(t):$(t);this.forEach(function(e){i.indexOf(e)<0&&n.push(e)})}return $(n)},has:function(e){return this.filter(function(){return D(e)?$.contains(this,e):$(this).find(e).size()})},eq:function(e){return-1===e?this.slice(e):this.slice(e,+e+1)},first:function(){var e=this[0];return e&&!D(e)?e:$(e)},last:function(){var e=this[this.length-1];return e&&!D(e)?e:$(e)},find:function(e){var t=this;return e?"object"==typeof e?$(e).filter(function(){var e=this;return o.some.call(t,function(t){return $.contains(t,e)})}):1==this.length?$(j.qsa(this[0],e)):this.map(function(){return j.qsa(this,e)}):[]},closest:function(e,t){var n=this[0],i=!1;for("object"==typeof e&&(i=$(e));n&&!(i?i.indexOf(n)>=0:j.matches(n,e));)n=n!==t&&!A(n)&&n.parentNode;return $(n)},parents:function(e){for(var t=[],n=this;n.length>0;)n=$.map(n,function(e){if((e=e.parentNode)&&!A(e)&&t.indexOf(e)<0)return t.push(e),e});return I(t,e)},parent:function(e){return I(r(this.pluck("parentNode")),e)},children:function(e){return I(this.map(function(){return B(this)}),e)},contents:function(){return this.map(function(){return a.call(this.childNodes)})},siblings:function(e){return I(this.map(function(e,t){return s.call(B(t.parentNode),function(e){return e!==t})}),e)},empty:function(){return this.each(function(){this.innerHTML=""})},pluck:function(e){return $.map(this,function(t){return t[e]})},show:function(){return this.each(function(){var e,t,n;"none"==this.style.display&&(this.style.display=""),"none"==getComputedStyle(this,"").getPropertyValue("display")&&(this.style.display=(e=this.nodeName,u[e]||(t=c.createElement(e),c.body.appendChild(t),n=getComputedStyle(t,"").getPropertyValue("display"),t.parentNode.removeChild(t),"none"==n&&(n="block"),u[e]=n),u[e]))})},replaceWith:function(e){return this.before(e).remove()},wrap:function(e){var t=L(e);if(this[0]&&!t)var n=$(e).get(0),i=n.parentNode||this.length>1;return this.each(function(r){$(this).wrapAll(t?e.call(this,r):i?n.cloneNode(!0):n)})},wrapAll:function(e){if(this[0]){var t;for($(this[0]).before(e=$(e));(t=e.children()).length;)e=t.first();$(e).append(this)}return this},wrapInner:function(e){var t=L(e);return this.each(function(n){var i=$(this),r=i.contents(),o=t?e.call(this,n):e;r.length?r.wrapAll(o):i.append(o)})},unwrap:function(){return this.parent().each(function(){$(this).replaceWith($(this).children())}),this},clone:function(){return this.map(function(){return this.cloneNode(!0)})},hide:function(){return this.css("display","none")},toggle:function(t){return this.each(function(){var n=$(this);(t===e?"none"==n.css("display"):t)?n.show():n.hide()})},prev:function(e){return $(this.pluck("previousElementSibling")).filter(e||"*")},next:function(e){return $(this.pluck("nextElementSibling")).filter(e||"*")},html:function(e){return 0 in arguments?this.each(function(t){var n=this.innerHTML;$(this).empty().append(X(this,e,t,n))}):0 in this?this[0].innerHTML:null},text:function(e){return 0 in arguments?this.each(function(t){var n=X(this,e,t,this.textContent);this.textContent=null==n?"":""+n}):0 in this?this[0].textContent:null},attr:function(n,i){var r;return"string"!=typeof n||1 in arguments?this.each(function(e){if(1===this.nodeType)if(D(n))for(t in n)_(this,t,n[t]);else _(this,n,X(this,i,e,this.getAttribute(n)))}):this.length&&1===this[0].nodeType?!(r=this[0].getAttribute(n))&&n in this[0]?this[0][n]:r:e},removeAttr:function(e){return this.each(function(){1===this.nodeType&&_(this,e)})},prop:function(e,t){return e=M[e]||e,1 in arguments?this.each(function(n){this[e]=X(this,t,n,this[e])}):this[0]&&this[0][e]},data:function(t,n){var i="data-"+t.replace(m,"-$1").toLowerCase(),r=1 in arguments?this.attr(i,n):this.attr(i);return null!==r?J(r):e},val:function(e){return 0 in arguments?this.each(function(t){this.value=X(this,e,t,this.value)}):this[0]&&(this[0].multiple?$(this[0]).find("option").filter(function(){return this.selected}).pluck("value"):this[0].value)},offset:function(e){if(e)return this.each(function(t){var n=$(this),i=X(this,e,t,n.offset()),r=n.offsetParent().offset(),o={top:i.top-r.top,left:i.left-r.left};"static"==n.css("position")&&(o.position="relative"),n.css(o)});if(!this.length)return null;var t=this[0].getBoundingClientRect();return{left:t.left+window.pageXOffset,top:t.top+window.pageYOffset,width:Math.round(t.width),height:Math.round(t.height)}},css:function(e,n){if(arguments.length<2){var r=this[0],o=getComputedStyle(r,"");if(!r)return;if("string"==typeof e)return r.style[i(e)]||o.getPropertyValue(e);if(O(e)){var a={};return $.each(O(e)?e:[e],function(e,t){a[t]=r.style[i(t)]||o.getPropertyValue(t)}),a}}var s="";if("string"==k(e))n||0===n?s=R(e)+":"+H(e,n):this.each(function(){this.style.removeProperty(R(e))});else for(t in e)e[t]||0===e[t]?s+=R(t)+":"+H(t,e[t])+";":this.each(function(){this.style.removeProperty(R(t))});return this.each(function(){this.style.cssText+=";"+s})},index:function(e){return e?this.indexOf($(e)[0]):this.parent().children().indexOf(this[0])},hasClass:function(e){return!!e&&o.some.call(this,function(e){return this.test(U(e))},z(e))},addClass:function(e){return e?this.each(function(t){n=[];var i=U(this);X(this,e,t,i).split(/\s+/g).forEach(function(e){$(this).hasClass(e)||n.push(e)},this),n.length&&U(this,i+(i?" ":"")+n.join(" "))}):this},removeClass:function(t){return this.each(function(i){if(t===e)return U(this,"");n=U(this),X(this,t,i,n).split(/\s+/g).forEach(function(e){n=n.replace(z(e)," ")}),U(this,n.trim())})},toggleClass:function(t,n){return t?this.each(function(i){var r=$(this);X(this,t,i,U(this)).split(/\s+/g).forEach(function(t){(n===e?!r.hasClass(t):n)?r.addClass(t):r.removeClass(t)})}):this},scrollTop:function(t){if(this.length){var n="scrollTop"in this[0];return t===e?n?this[0].scrollTop:this[0].pageYOffset:this.each(n?function(){this.scrollTop=t}:function(){this.scrollTo(this.scrollX,t)})}},scrollLeft:function(t){if(this.length){var n="scrollLeft"in this[0];return t===e?n?this[0].scrollLeft:this[0].pageXOffset:this.each(n?function(){this.scrollLeft=t}:function(){this.scrollTo(t,this.scrollY)})}},position:function(){if(this.length){var e=this[0],t=this.offsetParent(),n=this.offset(),i=g.test(t[0].nodeName)?{top:0,left:0}:t.offset();return n.top-=parseFloat($(e).css("margin-top"))||0,n.left-=parseFloat($(e).css("margin-left"))||0,i.top+=parseFloat($(t[0]).css("border-top-width"))||0,i.left+=parseFloat($(t[0]).css("border-left-width"))||0,{top:n.top-i.top,left:n.left-i.left}}},offsetParent:function(){return this.map(function(){for(var e=this.offsetParent||c.body;e&&!g.test(e.nodeName)&&"static"==$(e).css("position");)e=e.offsetParent;return e})}},$.fn.detach=$.fn.remove,["width","height"].forEach(function(t){var n=t.replace(/./,function(e){return e[0].toUpperCase()});$.fn[t]=function(i){var r,o=this[0];return i===e?P(o)?o["inner"+n]:A(o)?o.documentElement["scroll"+n]:(r=this.offset())&&r[t]:this.each(function(e){(o=$(this)).css(t,X(this,i,e,o[t]()))})}}),["after","prepend","before","append"].forEach(function(e,t){var n=t%2;$.fn[e]=function(){var e,i,r=$.map(arguments,function(t){return"object"==(e=k(t))||"array"==e||null==t?t:j.fragment(t)}),o=this.length>1;return r.length<1?this:this.each(function(e,a){i=n?a:a.parentNode,a=0==t?a.nextSibling:1==t?a.firstChild:2==t?a:null;var s=$.contains(c.documentElement,i);r.forEach(function(e){if(o)e=e.cloneNode(!0);else if(!i)return $(e).remove();i.insertBefore(e,a),s&&function e(t,n){n(t);for(var i=0,r=t.childNodes.length;i<r;i++)e(t.childNodes[i],n)}(e,function(e){null==e.nodeName||"SCRIPT"!==e.nodeName.toUpperCase()||e.type&&"text/javascript"!==e.type||e.src||window.eval.call(window,e.innerHTML)})})})},$.fn[n?e+"To":"insert"+(t?"Before":"After")]=function(t){return $(t)[e](this),this}}),j.Z.prototype=$.fn,j.uniq=r,j.deserializeValue=J,$.zepto=j,$}();window.Zepto=Zepto,void 0===window.$&&(window.$=Zepto),function($){var e,t=1,n=Array.prototype.slice,i=$.isFunction,r=function(e){return"string"==typeof e},o={},a={},s="onfocusin"in window,c={focus:"focusin",blur:"focusout"},u={mouseenter:"mouseover",mouseleave:"mouseout"};function l(e){return e._zid||(e._zid=t++)}function f(e,t,n,i){if((t=d(t)).ns)var r=(a=t.ns,new RegExp("(?:^| )"+a.replace(" "," .* ?")+"(?: |$)"));var a;return(o[l(e)]||[]).filter(function(e){return e&&(!t.e||e.e==t.e)&&(!t.ns||r.test(e.ns))&&(!n||l(e.fn)===l(n))&&(!i||e.sel==i)})}function d(e){var t=(""+e).split(".");return{e:t[0],ns:t.slice(1).sort().join(" ")}}function h(e,t){return e.del&&!s&&e.e in c||!!t}function p(e){return u[e]||s&&c[e]||e}function g(t,n,i,r,a,s,c){var f=l(t),g=o[f]||(o[f]=[]);n.split(/\s/).forEach(function(n){if("ready"==n)return $(document).ready(i);var o=d(n);o.fn=i,o.sel=a,o.e in u&&(i=function(e){var t=e.relatedTarget;if(!t||t!==this&&!$.contains(this,t))return o.fn.apply(this,arguments)}),o.del=s;var l=s||i;o.proxy=function(n){if(!(n=x(n)).isImmediatePropagationStopped()){n.data=r;var i=l.apply(t,n._args==e?[n]:[n].concat(n._args));return!1===i&&(n.preventDefault(),n.stopPropagation()),i}},o.i=g.length,g.push(o),"addEventListener"in t&&t.addEventListener(p(o.e),o.proxy,h(o,c))})}function m(e,t,n,i,r){var a=l(e);(t||"").split(/\s/).forEach(function(t){f(e,t,n,i).forEach(function(t){delete o[a][t.i],"removeEventListener"in e&&e.removeEventListener(p(t.e),t.proxy,h(t,r))})})}a.click=a.mousedown=a.mouseup=a.mousemove="MouseEvents",$.event={add:g,remove:m},$.proxy=function(e,t){var o=2 in arguments&&n.call(arguments,2);if(i(e)){var a=function(){return e.apply(t,o?o.concat(n.call(arguments)):arguments)};return a._zid=l(e),a}if(r(t))return o?(o.unshift(e[t],e),$.proxy.apply(null,o)):$.proxy(e[t],e);throw new TypeError("expected function")},$.fn.bind=function(e,t,n){return this.on(e,t,n)},$.fn.unbind=function(e,t){return this.off(e,t)},$.fn.one=function(e,t,n,i){return this.on(e,t,n,i,1)};var v=function(){return!0},y=function(){return!1},w=/^([A-Z]|returnValue$|layer[XY]$)/,b={preventDefault:"isDefaultPrevented",stopImmediatePropagation:"isImmediatePropagationStopped",stopPropagation:"isPropagationStopped"};function x(t,n){return!n&&t.isDefaultPrevented||(n||(n=t),$.each(b,function(e,i){var r=n[e];t[e]=function(){return this[i]=v,r&&r.apply(n,arguments)},t[i]=y}),(n.defaultPrevented!==e?n.defaultPrevented:"returnValue"in n?!1===n.returnValue:n.getPreventDefault&&n.getPreventDefault())&&(t.isDefaultPrevented=v)),t}function C(t){var n,i={originalEvent:t};for(n in t)w.test(n)||t[n]===e||(i[n]=t[n]);return x(i,t)}$.fn.delegate=function(e,t,n){return this.on(t,e,n)},$.fn.undelegate=function(e,t,n){return this.off(t,e,n)},$.fn.live=function(e,t){return $(document.body).delegate(this.selector,e,t),this},$.fn.die=function(e,t){return $(document.body).undelegate(this.selector,e,t),this},$.fn.on=function(t,o,a,s,c){var u,l,f=this;return t&&!r(t)?($.each(t,function(e,t){f.on(e,o,a,t,c)}),f):(r(o)||i(s)||!1===s||(s=a,a=o,o=e),(i(a)||!1===a)&&(s=a,a=e),!1===s&&(s=y),f.each(function(e,i){c&&(u=function(e){return m(i,e.type,s),s.apply(this,arguments)}),o&&(l=function(e){var t,r=$(e.target).closest(o,i).get(0);if(r&&r!==i)return t=$.extend(C(e),{currentTarget:r,liveFired:i}),(u||s).apply(r,[t].concat(n.call(arguments,1)))}),g(i,t,s,a,o,l||u)}))},$.fn.off=function(t,n,o){var a=this;return t&&!r(t)?($.each(t,function(e,t){a.off(e,n,t)}),a):(r(n)||i(o)||!1===o||(o=n,n=e),!1===o&&(o=y),a.each(function(){m(this,t,o,n)}))},$.fn.trigger=function(e,t){return(e=r(e)||$.isPlainObject(e)?$.Event(e):x(e))._args=t,this.each(function(){"dispatchEvent"in this?this.dispatchEvent(e):$(this).triggerHandler(e,t)})},$.fn.triggerHandler=function(e,t){var n,i;return this.each(function(o,a){(n=C(r(e)?$.Event(e):e))._args=t,n.target=a,$.each(f(a,e.type||e),function(e,t){if(i=t.proxy(n),n.isImmediatePropagationStopped())return!1})}),i},"focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select keydown keypress keyup error".split(" ").forEach(function(e){$.fn[e]=function(t){return t?this.bind(e,t):this.trigger(e)}}),["focus","blur"].forEach(function(e){$.fn[e]=function(t){return t?this.bind(e,t):this.each(function(){try{this[e]()}catch(e){}}),this}}),$.Event=function(e,t){r(e)||(e=(t=e).type);var n=document.createEvent(a[e]||"Events"),i=!0;if(t)for(var o in t)"bubbles"==o?i=!!t[o]:n[o]=t[o];return n.initEvent(e,i,!0),x(n)}}(Zepto),function($){var e,t,n=0,i=window.document,r=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,o=/^(?:text|application)\/javascript/i,a=/^(?:text|application)\/xml/i,s="application/json",c="text/html",u=/^\s*$/;function l(e,t,n,r){if(e.global)return function(e,t,n){var i=$.Event(t);return $(e).trigger(i,n),!i.isDefaultPrevented()}(t||i,n,r)}function f(e,t){var n=t.context;if(!1===t.beforeSend.call(n,e,t)||!1===l(t,n,"ajaxBeforeSend",[e,t]))return!1;l(t,n,"ajaxSend",[e,t])}function d(e,t,n,i){var r=n.context;n.success.call(r,e,"success",t),i&&i.resolveWith(r,[e,"success",t]),l(n,r,"ajaxSuccess",[t,n,e]),p("success",t,n)}function h(e,t,n,i,r){var o=i.context;i.error.call(o,n,t,e),r&&r.rejectWith(o,[n,t,e]),l(i,o,"ajaxError",[n,i,e||t]),p(t,n,i)}function p(e,t,n){var i=n.context;n.complete.call(i,t,e),l(n,i,"ajaxComplete",[t,n]),function(e){e.global&&!--$.active&&l(e,null,"ajaxStop")}(n)}function g(){}function m(e,t){return""==t?e:(e+"&"+t).replace(/[&?]{1,2}/,"?")}function v(e,t,n,i){return $.isFunction(t)&&(i=n,n=t,t=void 0),$.isFunction(n)||(i=n,n=void 0),{url:e,data:t,success:n,dataType:i}}$.active=0,$.ajaxJSONP=function(e,t){if(!("type"in e))return $.ajax(e);var r,o,a=e.jsonpCallback,s=($.isFunction(a)?a():a)||"jsonp"+ ++n,c=i.createElement("script"),u=window[s],l=function(e){$(c).triggerHandler("error",e||"abort")},p={abort:l};return t&&t.promise(p),$(c).on("load error",function(n,i){clearTimeout(o),$(c).off().remove(),"error"!=n.type&&r?d(r[0],p,e,t):h(null,i||"error",p,e,t),window[s]=u,r&&$.isFunction(u)&&u(r[0]),u=r=void 0}),!1===f(p,e)?(l("abort"),p):(window[s]=function(){r=arguments},c.src=e.url.replace(/\?(.+)=\?/,"?$1="+s),i.head.appendChild(c),e.timeout>0&&(o=setTimeout(function(){l("timeout")},e.timeout)),p)},$.ajaxSettings={type:"GET",beforeSend:g,success:g,error:g,complete:g,context:null,global:!0,xhr:function(){return new window.XMLHttpRequest},accepts:{script:"text/javascript, application/javascript, application/x-javascript",json:s,xml:"application/xml, text/xml",html:c,text:"text/plain"},crossDomain:!1,timeout:0,processData:!0,cache:!0},$.ajax=function(n){var i=$.extend({},n||{}),r=$.Deferred&&$.Deferred();for(e in $.ajaxSettings)void 0===i[e]&&(i[e]=$.ajaxSettings[e]);!function(e){e.global&&0==$.active++&&l(e,null,"ajaxStart")}(i),i.crossDomain||(i.crossDomain=/^([\w-]+:)?\/\/([^\/]+)/.test(i.url)&&RegExp.$2!=window.location.host),i.url||(i.url=window.location.toString()),function(e){e.processData&&e.data&&"string"!=$.type(e.data)&&(e.data=$.param(e.data,e.traditional)),!e.data||e.type&&"GET"!=e.type.toUpperCase()||(e.url=m(e.url,e.data),e.data=void 0)}(i);var p=i.dataType,v=/\?.+=\?/.test(i.url);if(v&&(p="jsonp"),!1!==i.cache&&(n&&!0===n.cache||"script"!=p&&"jsonp"!=p)||(i.url=m(i.url,"_="+Date.now())),"jsonp"==p)return v||(i.url=m(i.url,i.jsonp?i.jsonp+"=?":!1===i.jsonp?"":"callback=?")),$.ajaxJSONP(i,r);var y,w=i.accepts[p],b={},x=function(e,t){b[e.toLowerCase()]=[e,t]},C=/^([\w-]+:)\/\//.test(i.url)?RegExp.$1:window.location.protocol,S=i.xhr(),E=S.setRequestHeader;if(r&&r.promise(S),i.crossDomain||x("X-Requested-With","XMLHttpRequest"),x("Accept",w||"*/*"),(w=i.mimeType||w)&&(w.indexOf(",")>-1&&(w=w.split(",",2)[0]),S.overrideMimeType&&S.overrideMimeType(w)),(i.contentType||!1!==i.contentType&&i.data&&"GET"!=i.type.toUpperCase())&&x("Content-Type",i.contentType||"application/x-www-form-urlencoded"),i.headers)for(t in i.headers)x(t,i.headers[t]);if(S.setRequestHeader=x,S.onreadystatechange=function(){if(4==S.readyState){S.onreadystatechange=g,clearTimeout(y);var e,t=!1;if(S.status>=200&&S.status<300||304==S.status||0==S.status&&"file:"==C){p=p||((n=i.mimeType||S.getResponseHeader("content-type"))&&(n=n.split(";",2)[0]),n&&(n==c?"html":n==s?"json":o.test(n)?"script":a.test(n)&&"xml")||"text"),e=S.responseText;try{"script"==p?(0,eval)(e):"xml"==p?e=S.responseXML:"json"==p&&(e=u.test(e)?null:$.parseJSON(e))}catch(e){t=e}t?h(t,"parsererror",S,i,r):d(e,S,i,r)}else h(S.statusText||null,S.status?"error":"abort",S,i,r)}var n},!1===f(S,i))return S.abort(),h(null,"abort",S,i,r),S;if(i.xhrFields)for(t in i.xhrFields)S[t]=i.xhrFields[t];var j=!("async"in i)||i.async;for(t in S.open(i.type,i.url,j,i.username,i.password),b)E.apply(S,b[t]);return i.timeout>0&&(y=setTimeout(function(){S.onreadystatechange=g,S.abort(),h(null,"timeout",S,i,r)},i.timeout)),S.send(i.data?i.data:null),S},$.get=function(){return $.ajax(v.apply(null,arguments))},$.post=function(){var e=v.apply(null,arguments);return e.type="POST",$.ajax(e)},$.getJSON=function(){var e=v.apply(null,arguments);return e.dataType="json",$.ajax(e)},$.fn.load=function(e,t,n){if(!this.length)return this;var i,o=this,a=e.split(/\s/),s=v(e,t,n),c=s.success;return a.length>1&&(s.url=a[0],i=a[1]),s.success=function(e){o.html(i?$("<div>").html(e.replace(r,"")).find(i):e),c&&c.apply(o,arguments)},$.ajax(s),this};var y=encodeURIComponent;$.param=function(e,t){var n=[];return n.add=function(e,t){this.push(y(e)+"="+y(t))},function e(t,n,i,r){var o,a=$.isArray(n),s=$.isPlainObject(n);$.each(n,function(n,c){o=$.type(c),r&&(n=i?r:r+"["+(s||"object"==o||"array"==o?n:"")+"]"),!r&&a?t.add(c.name,c.value):"array"==o||!i&&"object"==o?e(t,c,i,n):t.add(n,c)})}(n,e,t),n.join("&").replace(/%20/g,"+")}}(Zepto),function($){$.fn.serializeArray=function(){var e,t=[];return $([].slice.call(this.get(0).elements)).each(function(){var n=(e=$(this)).attr("type");"fieldset"!=this.nodeName.toLowerCase()&&!this.disabled&&"submit"!=n&&"reset"!=n&&"button"!=n&&("radio"!=n&&"checkbox"!=n||this.checked)&&t.push({name:e.attr("name"),value:e.val()})}),t},$.fn.serialize=function(){var e=[];return this.serializeArray().forEach(function(t){e.push(encodeURIComponent(t.name)+"="+encodeURIComponent(t.value))}),e.join("&")},$.fn.submit=function(e){if(e)this.bind("submit",e);else if(this.length){var t=$.Event("submit");this.eq(0).trigger(t),t.isDefaultPrevented()||this.get(0).submit()}return this}}(Zepto),function($){"__proto__"in{}||$.extend($.zepto,{Z:function(e,t){return e=e||[],$.extend(e,$.fn),e.selector=t||"",e.__Z=!0,e},isZ:function(e){return"array"===$.type(e)&&"__Z"in e}}),window.Zepto=Zepto,"$"in window||(window.$=Zepto),"function"==typeof define&&define.amd&&define("jquery",[],function(){return Zepto});try{getComputedStyle(void 0)}catch(t){var e=getComputedStyle;window.getComputedStyle=function(t){try{return e(t)}catch(e){return null}}}}(Zepto),function($){$.Jcrop=function(e,t){var n,i=$.extend({},$.Jcrop.defaults),r=navigator.userAgent.toLowerCase(),o=/msie/.test(r),a=/msie [1-6]\./.test(r);function s(e){return Math.round(e)+"px"}function c(e){return i.baseClass+"-"+e}function u(e){var t=$(e).offset();return[t.left,t.top]}function l(e){return[e.pageX-n[0],e.pageY-n[1]]}function f(e){"object"!=typeof e&&(e={}),i=$.extend(i,e),$.each(["onChange","onSelect","onRelease","onDblClick"],function(e,t){"function"!=typeof i[t]&&(i[t]=function(){})})}function d(e,t,r){if(n=u(j),V.hLFaoTXhse("move"===e?e:e+"-resize"),"move"===e)return V.activateHandlers(function(e){var t=e;return G.watchKeys(),function(e){q.moveOffset([e[0]-t[0],e[1]-t[1]]),t=e,Z.update()}}(t),v,r);var o=q.getFixed(),a=h(e),s=q.getCorner(h(a));q.setPressed(q.getCorner(a)),q.setCurrent(s),V.activateHandlers(function(e,t){return function(n){if(i.aspectRatio)switch(e){case"e":case"w":n[1]=t.y+1;break;case"n":case"s":n[0]=t.x+1}else switch(e){case"e":case"w":n[1]=t.y2;break;case"n":case"s":n[0]=t.x2}q.setCurrent(n),Z.update()}}(e,o),v,r)}function h(e){switch(e){case"n":return"sw";case"s":case"e":return"nw";case"w":return"ne";case"ne":return"sw";case"nw":return"se";case"se":return"nw";case"sw":return"ne"}}function p(e){return function(t){return!i.disabled&&(!("move"===e&&!i.allowMove)&&(n=u(j),B=!0,d(e,l(t)),t.stopPropagation(),t.preventDefault(),!1))}}function g(e,t,n){var i=e.width(),r=e.height();i>t&&t>0&&(i=t,r=t/e.width()*e.height()),r>n&&n>0&&(r=n,i=n/e.height()*e.width()),z=e.width()/i,H=e.height()/r,e.width(i).height(r)}function m(e){return{x:e.x*z,y:e.y*H,x2:e.x2*z,y2:e.y2*H,w:e.w*z,h:e.h*H}}function v(e){var t=q.getFixed();t.w>i.minSelect[0]&&t.h>i.minSelect[1]?(Z.enableHandles(),Z.done()):Z.release(),V.hLFaoTXhse(i.allowSelect?i.cursor:"default")}function y(e){if(i.disabled)return!1;if(!i.allowSelect)return!1;B=!0,n=u(j),Z.disableHandles(),V.hLFaoTXhse(i.cursor);var t=l(e);return q.setPressed(t),Z.update(),V.activateHandlers(w,v,"touch"===e.type.substring(0,5)),G.watchKeys(),e.stopPropagation(),e.preventDefault(),!1}function w(e){q.setCurrent(e),Z.update()}function b(){var e=$("<div></div>").addClass(c("tracker"));return o&&e.css({opacity:0,backgroundColor:"white"}),e}"object"!=typeof e&&(e=$(e)[0]),"object"!=typeof t&&(t={}),f(t);var x={border:"none",visibility:"visible",margin:0,padding:0,position:"absolute",top:0,left:0},C=$(e),S=!0;if("IMG"==e.tagName){if(0!=C[0].width&&0!=C[0].height)C.width(C[0].width),C.height(C[0].height);else{var E=new Image;E.src=C[0].src,C.width(E.width),C.height(E.height)}var j=C.clone().removeAttr("id").css(x).show();j.width(C.width()),j.height(C.height()),C.after(j).hide()}else j=C.css(x).show(),S=!1,null===i.shade&&(i.shade=!0);g(j,i.boxWidth,i.boxHeight);var T=j.width(),M=j.height(),O=$("<div />").width(T).height(M).addClass(c("holder")).css({position:"relative",backgroundColor:i.bgColor}).insertAfter(C).append(j);i.addClass&&O.addClass(i.addClass);var k=$("<div />"),L=$("<div />").width("100%").height("100%").css({zIndex:310,position:"absolute",overflow:"hidden"}),P=$("<div />").width("100%").height("100%").css("zIndex",320),A=$("<div />").css({position:"absolute",zIndex:600}).dblclick(function(){var e=q.getFixed();i.onDblClick.call(re,e)}).insertBefore(j).append(L,P);S&&(k=$("<img />").attr("src",j.attr("src")).css(x).width(T).height(M),L.append(k)),a&&A.css({overflowY:"hidden"});var D,N,F,R,z,H,B,I,X=i.boundary,_=b().width(T+2*X).height(M+2*X).css({position:"absolute",top:s(-X),left:s(-X),zIndex:290}).mousedown(y),U=i.bgColor,J=i.bgOpacity;n=u(j);var W=function(){function e(){var e,t={},n=["touchstart","touchmove","touchend"],i=document.createElement("div");try{for(e=0;e<n.length;e++){var r=n[e],o=(r="on"+r)in i;o||(i.setAttribute(r,"return;"),o="function"==typeof i[r]),t[n[e]]=o}return t.touchstart&&t.touchend&&t.touchmove}catch(e){return!1}}return{createDragger:function(e){return function(t){return!i.disabled&&(!("move"===e&&!i.allowMove)&&(n=u(j),B=!0,d(e,l(W.cfilter(t)),!0),t.stopPropagation(),t.preventDefault(),!1))}},newSelection:function(e){return y(W.cfilter(e))},cfilter:function(e){return e.pageX=e.originalEvent.changedTouches[0].pageX,e.pageY=e.originalEvent.changedTouches[0].pageY,e},isSupported:e,support:!0===i.touchSupport||!1===i.touchSupport?i.touchSupport:e()}}(),q=function(){var e,t,n=0,r=0,o=0,a=0;function s(){if(!i.aspectRatio)return function(){var e,t=o-n,i=a-r;D&&Math.abs(t)>D&&(o=t>0?n+D:n-D);N&&Math.abs(i)>N&&(a=i>0?r+N:r-N);R/H&&Math.abs(i)<R/H&&(a=i>0?r+R/H:r-R/H);F/z&&Math.abs(t)<F/z&&(o=t>0?n+F/z:n-F/z);n<0&&(o-=n,n-=n);r<0&&(a-=r,r-=r);o<0&&(n-=o,o-=o);a<0&&(r-=a,a-=a);o>T&&(n-=e=o-T,o-=e);a>M&&(r-=e=a-M,a-=e);n>T&&(a-=e=n-M,r-=e);r>M&&(a-=e=r-M,r-=e);return l(u(n,r,o,a))}();var e,t,s,c,f=i.aspectRatio,d=i.minSize[0]/z,h=i.maxSize[0]/z,p=i.maxSize[1]/H,g=o-n,m=a-r,v=Math.abs(g),y=Math.abs(m);return 0===h&&(h=10*T),0===p&&(p=10*M),v/y<f?(t=a,s=y*f,(e=g<0?n-s:s+n)<0?(e=0,c=Math.abs((e-n)/f),t=m<0?r-c:c+r):e>T&&(e=T,c=Math.abs((e-n)/f),t=m<0?r-c:c+r)):(e=o,c=v/f,(t=m<0?r-c:r+c)<0?(t=0,s=Math.abs((t-r)*f),e=g<0?n-s:s+n):t>M&&(t=M,s=Math.abs(t-r)*f,e=g<0?n-s:s+n)),e>n?(e-n<d?e=n+d:e-n>h&&(e=n+h),t=t>r?r+(e-n)/f:r-(e-n)/f):e<n&&(n-e<d?e=n-d:n-e>h&&(e=n-h),t=t>r?r+(n-e)/f:r-(n-e)/f),e<0?(n-=e,e=0):e>T&&(n-=e-T,e=T),t<0?(r-=t,t=0):t>M&&(r-=t-M,t=M),l(u(n,r,e,t))}function c(e){return e[0]<0&&(e[0]=0),e[1]<0&&(e[1]=0),e[0]>T&&(e[0]=T),e[1]>M&&(e[1]=M),[Math.round(e[0]),Math.round(e[1])]}function u(e,t,n,i){var r=e,o=n,a=t,s=i;return n<e&&(r=n,o=e),i<t&&(a=i,s=t),[r,a,o,s]}function l(e){return{x:e[0],y:e[1],x2:e[2],y2:e[3],w:e[2]-e[0],h:e[3]-e[1]}}return{flipCoords:u,setPressed:function(e){e=c(e),o=n=e[0],a=r=e[1]},setCurrent:function(n){n=c(n),e=n[0]-o,t=n[1]-a,o=n[0],a=n[1]},getOffset:function(){return[e,t]},moveOffset:function(e){var t=e[0],i=e[1];0>n+t&&(t-=t+n),0>r+i&&(i-=i+r),M<a+i&&(i+=M-(a+i)),T<o+t&&(t+=T-(o+t)),n+=t,o+=t,r+=i,a+=i},getCorner:function(e){var t=s();switch(e){case"ne":return[t.x2,t.y];case"nw":return[t.x,t.y];case"se":return[t.x2,t.y2];case"sw":return[t.x,t.y2]}},getFixed:s}}(),Y=function(){var e=!1,t=$("<div />").css({position:"absolute",zIndex:240,opacity:0}),n={top:a(),left:a().height(M),right:a().height(M),bottom:a()};function r(){return o(q.getFixed())}function o(e){n.top.css({left:s(e.x),width:s(e.w),height:s(e.y)}),n.bottom.css({top:s(e.y2),left:s(e.x),width:s(e.w),height:s(M-e.y2)}),n.right.css({left:s(e.x2),width:s(T-e.x2)}),n.left.css({width:s(e.x)})}function a(){return $("<div />").css({position:"absolute",backgroundColor:i.shadeColor||i.bgColor}).appendTo(t)}function c(){e||(e=!0,t.insertBefore(j),r(),Z.setBgOpacity(1,0,1),k.hide(),u(i.shadeColor||i.bgColor,1),Z.isAwake()?f(i.bgOpacity,1):f(1,1))}function u(e,t){ne(d(),e,t)}function l(){e&&(t.remove(),k.show(),e=!1,Z.isAwake()?Z.setBgOpacity(i.bgOpacity,1,1):(Z.setBgOpacity(1,1,1),Z.disableHandles()),ne(O,0,1))}function f(n,r){e&&(i.bgFade&&!r?t.animate({opacity:1-n},{queue:!1,duration:i.fadeTime}):t.css({opacity:1-n}))}function d(){return t.children()}return{update:r,updateRaw:o,getShades:d,setBgColor:u,enable:c,disable:l,JtjicduAaU:function(e,t){n.left.css({height:s(t)}),n.right.css({height:s(t)})},refresh:function(){i.shade?c():l(),Z.isAwake()&&f(i.bgOpacity)},opacity:f}}(),Z=function(){var e,t=370,n={},r={},o={},a=!1;function u(e,t){var n=$("<div />").mousedown(p(e)).css({cursor:e+"-resize",position:"absolute",zIndex:t}).addClass("ord-"+e);return W.support&&n.bind("touchstart.jcrop",W.createDragger(e)),P.append(n),n}function l(){var e=q.getFixed();q.setPressed([e.x,e.y]),q.setCurrent([e.x2,e.y2]),f()}function f(t){if(e)return d(t)}function d(t){var n,r,o,a,c=q.getFixed();n=c.w,r=c.h,A.width(Math.round(n)).height(Math.round(r)),o=c.x,a=c.y,i.shade||k.css({top:s(-a),left:s(-o)}),A.css({top:s(a),left:s(o)}),i.shade&&Y.updateRaw(c),e||function(){A.show(),i.shade?Y.opacity(J):h(J,!0);e=!0}(),t?i.onSelect.call(re,m(c)):i.onChange.call(re,m(c))}function h(t,n,r){(e||n)&&(i.bgFade&&!r?j.animate({opacity:t},{queue:!1,duration:i.fadeTime}):j.css("opacity",t))}function g(){if(a=!0,i.allowResize)return P.show(),!0}function v(){a=!1,P.hide()}function y(e){e?(I=!0,v()):(I=!1,g())}i.dragEdges&&$.isArray(i.createDragbars)&&function(e){var n;for(n=0;n<e.length;n++)o[e[n]]=u(e[n],t++).addClass("jcrop-dragbar")}(i.createDragbars),$.isArray(i.createHandles)&&function(e){var n,o,a,s;for(n=0;n<e.length;n++)r[e[n]]=(o=e[n],s=void 0,a=i.handleSize,s=u(o,t++).css({opacity:i.handleOpacity}).addClass(c("handle")),a&&s.width(a).height(a),s)}(i.createHandles),i.drawBorders&&$.isArray(i.createBorders)&&function(e){var t,r,o,a;for(r=0;r<e.length;r++){switch(e[r]){case"n":t="hline";break;case"s":t="hline bottom";break;case"e":t="vline right";break;case"w":t="vline"}n[e[r]]=(o=t,a=$("<div />").css({position:"absolute",opacity:i.borderOpacity}).addClass(c(o)),L.append(a),a)}}(i.createBorders),$(document).bind("touchstart.jcrop-ios",function(e){$(e.currentTarget).hasClass("jcrop-tracker")&&e.stopPropagation()});var w=b().mousedown(p("move")).css({cursor:"move",position:"absolute",zIndex:360});return W.support&&w.bind("touchstart.jcrop",W.createDragger("move")),L.append(w),v(),{updateVisible:f,update:d,release:function(){v(),A.hide(),i.shade?Y.opacity(1):h(1),e=!1,i.onRelease.call(re)},refresh:l,isAwake:function(){return e},hLFaoTXhse:function(e){w.css("cursor",e)},enableHandles:g,enableOnly:function(){a=!0},showHandles:function(){a&&P.show()},disableHandles:v,animMode:y,setBgOpacity:h,done:function(){y(!1),l()}}}(),V=function(){var e=function(){},t=function(){},n=i.trackDocument;function r(t){return e(l(t)),!1}function o(n){return n.preventDefault(),n.stopPropagation(),B&&(B=!1,t(l(n)),Z.isAwake()&&i.onSelect.call(re,m(q.getFixed())),_.css({zIndex:290}),$(document).unbind(".jcrop"),e=function(){},t=function(){}),!1}function a(t){return e(l(W.cfilter(t))),!1}function s(e){return o(W.cfilter(e))}return n||_.mousemove(r).mouseup(o).mouseout(o),j.before(_),{activateHandlers:function(i,c,u){return B=!0,e=i,t=c,function(e){_.css({zIndex:450}),e?$(document).bind("touchmove.jcrop",a).bind("touchend.jcrop",s):n&&$(document).bind("mousemove.jcrop",r).bind("mouseup.jcrop",o)}(u),!1},hLFaoTXhse:function(e){_.css("cursor",e)}}}(),G=function(){var e=$('<input type="radio" />').css({position:"fixed",left:"-120px",width:"12px"}).addClass("jcrop-keymgr"),t=$("<div />").css({position:"absolute",overflow:"hidden"}).append(e);function n(e,t,n){i.allowMove&&(q.moveOffset([t,n]),Z.updateVisible(!0)),e.preventDefault(),e.stopPropagation()}return i.keySupport&&(e.keydown(function(e){if(e.ctrlKey||e.metaKey)return!0;var t=!!e.shiftKey?10:1;switch(e.keyCode){case 37:n(e,-t,0);break;case 39:n(e,t,0);break;case 38:n(e,0,-t);break;case 40:n(e,0,t);break;case 27:i.allowSelect&&Z.release();break;case 9:return!0}return!1}).blur(function(t){e.hide()}),a||!i.fixedSupport?(e.css({position:"absolute",left:"-20px"}),t.append(e).insertBefore(j)):e.insertBefore(j)),{watchKeys:function(){i.keySupport&&(e.show(),e.focus())}}}();function K(e){Q([e[0]/z,e[1]/H,e[2]/z,e[3]/H]),i.onSelect.call(re,m(q.getFixed())),Z.enableHandles()}function Q(e){q.setPressed([e[0],e[1]]),q.setCurrent([e[2],e[3]]),Z.update()}function ee(){i.disabled=!0,Z.disableHandles(),Z.hLFaoTXhse("default"),V.hLFaoTXhse("default")}function te(){i.disabled=!1,ie()}function ne(e,t,n){var r=t||i.bgColor;i.bgFade&&$.fx.step.hasOwnProperty("backgroundColor")&&i.fadeTime&&!n?e.animate({backgroundColor:r},{queue:!1,duration:i.fadeTime}):e.css("backgroundColor",r)}function ie(e){i.allowResize?e?Z.enableOnly():Z.enableHandles():Z.disableHandles(),V.hLFaoTXhse(i.allowSelect?i.cursor:"default"),Z.hLFaoTXhse(i.allowMove?"move":"default"),i.hasOwnProperty("trueSize")&&(z=i.trueSize[0]/T,H=i.trueSize[1]/M),i.hasOwnProperty("setSelect")&&(K(i.setSelect),Z.done(),delete i.setSelect),Y.refresh(),i.bgColor!=U&&(ne(i.shade?Y.getShades():O,i.shade&&i.shadeColor||i.bgColor),U=i.bgColor),J!=i.bgOpacity&&(J=i.bgOpacity,i.shade?Y.refresh():Z.setBgOpacity(J)),D=i.maxSize[0]||0,N=i.maxSize[1]||0,F=i.minSize[0]||0,R=i.minSize[1]||0,i.hasOwnProperty("outerImage")&&(j.attr("src",i.outerImage),delete i.outerImage),Z.refresh()}W.support&&_.bind("touchstart.jcrop",W.newSelection),P.hide(),ie(!0);var re={UXjUyeUSfD:function(e,t){Z.release(),ee();var n=new Image;n.onload=function(){var r=n.width,o=n.height,a=i.boxWidth,s=i.boxHeight;j.width(r).height(o),j.attr("src",e),k.attr("src",e),g(j,a,s),T=j.width(),M=j.height(),k.width(T).height(M),_.width(T+2*X).height(M+2*X),O.width(T).height(M),Y.JtjicduAaU(T,M),te(),"function"==typeof t&&t.call(re)},n.src=e},animateTo:function(e,t){var n=e[0]/z,r=e[1]/H,o=e[2]/z,a=e[3]/H;if(!I){var s=q.flipCoords(n,r,o,a),c=q.getFixed(),u=[c.x,c.y,c.x2,c.y2],l=u,f=i.animationDelay,d=s[0]-u[0],h=s[1]-u[1],p=s[2]-u[2],g=s[3]-u[3],m=0,v=i.swingSpeed;n=l[0],r=l[1],o=l[2],a=l[3],Z.animMode(!0);var y=function(){m+=(100-m)/v,l[0]=Math.round(n+m/100*d),l[1]=Math.round(r+m/100*h),l[2]=Math.round(o+m/100*p),l[3]=Math.round(a+m/100*g),m>=99.8&&(m=100),m<100?(Q(l),w()):(Z.done(),Z.animMode(!1),"function"==typeof t&&t.call(re))};w()}function w(){window.setTimeout(y,f)}},setSelect:K,setOptions:function(e){f(e),ie()},tellSelect:function(){return m(q.getFixed())},tellScaled:function(){return q.getFixed()},setClass:function(e){O.removeClass().addClass(c("holder")).addClass(e)},disable:ee,enable:te,cancel:function(){Z.done(),V.activateHandlers(null,null)},release:Z.release,destroy:function(){O.remove(),C.show(),C.css("visibility","visible"),$(e).removeData("Jcrop")},focus:G.watchKeys,getBounds:function(){return[T*z,M*H]},getWidgetSize:function(){return[T,M]},getScaleFactor:function(){return[z,H]},DNyeyCHsNf:function(){return i},ui:{holder:O,selection:A}};return o&&O.bind("selectstart",function(){return!1}),C.data("Jcrop",re),re},$.fn.Jcrop=function(e,t){var n;return this.each(function(){if($(this).data("Jcrop")){if("api"===e)return $(this).data("Jcrop");$(this).data("Jcrop").setOptions(e)}else"IMG"==this.tagName?$.Jcrop.Loader(this,function(){$(this).css({display:"YQpSidpeGc",visibility:"hidden"}),n=$.Jcrop(this,e),$.isFunction(t)&&t.call(n)}):($(this).css({display:"YQpSidpeGc",visibility:"hidden"}),n=$.Jcrop(this,e),$.isFunction(t)&&t.call(n))}),this},$.Jcrop.Loader=function(e,t,n){var i=$(e),r=i[0];i.bind("load.jcloader",function e(){r.complete?(i.unbind(".jcloader"),$.isFunction(t)&&t.call(r)):window.setTimeout(e,50)}).bind("error.jcloader",function(e){i.unbind(".jcloader"),$.isFunction(n)&&n.call(r)}),r.complete&&$.isFunction(t)&&(i.unbind(".jcloader"),t.call(r))},$.Jcrop.defaults={allowSelect:!0,allowMove:!0,allowResize:!0,trackDocument:!0,baseClass:"jcrop",addClass:null,bgColor:"black",bgOpacity:.6,bgFade:!1,borderOpacity:.4,handleOpacity:.5,handleSize:null,aspectRatio:0,keySupport:!0,createHandles:["n","s","e","w","nw","ne","se","sw"],createDragbars:["n","s","e","w"],createBorders:["n","s","e","w"],drawBorders:!0,dragEdges:!0,fixedSupport:!0,touchSupport:null,shade:null,boxWidth:0,boxHeight:0,boundary:2,fadeTime:400,animationDelay:20,swingSpeed:3,minSelect:[0,0],maxSize:[0,0],minSize:[0,0],onChange:function(){},onSelect:function(){},onDblClick:function(){},onRelease:function(){}}}($),$(function($){window.addEventListener("contextmenu",function(e){e.preventDefault()}),window.addEventListener("keydown",function(e){27===e.keyCode&&window.close()}),window.addEventListener("mousedown",function(e){2==e.which&&e.preventDefault()}),window.addEventListener("blur",function(){window.close()},!1),chrome.runtime.sendMessage({msg:"capture:init",data:{windowInnerWidth:window.innerWidth,windowInnerHeight:window.innerHeight}},function(e){var t=document.getElementById("capture");window.reductionRatio=e.reductionRatio,t.src=e.imageUrl,t.width=e.imageWidth,t.height=e.imageHeight,e.imageWidth<window.innerWidth&&$("div.LyWrap").css({left:(window.innerWidth-e.imageWidth)/2,position:"absolute"}),e.imageHeight<window.innerHeight&&$("div.LyWrap").css({top:(window.innerHeight-e.imageHeight)/2,position:"absolute"});var n=$(".MdVLine"),i=$(".MdHLine"),r=$(".MdTxt01"),o=$(".MdBtnSet"),a=($("#capture"),null);r.css("left",-999),o.css("left",-999);var s=$(".LyWrap").offset();e.XLT&&(o.find(".MdBtn01Cancel").attr("title",e.XLT.CANCEL),o.find(".MdBtn01Save").attr("title",e.XLT.SAVE),o.find(".MdBtn01Send").attr("title",e.XLT.SEND));var c=function(e){var t=new RegExp("[?&]"+e+"=([^&]*)").exec(window.location.search);return t&&decodeURIComponent(t[1].replace(/\+/g," "))},u=function(e){return 1==String(e).length?"0"+e:e},l=function(e){var t,n,i=h;t=(n=document.createElement("canvas")).getContext("2d");var r=1;void 0!==window.reductionRatio&&(r=window.reductionRatio),n.width=i.w/r,n.height=i.h/r,t.drawImage($("#capture")[0],i.x/r,i.y/r,i.w/r,i.h/r,0,0,i.w/r,i.h/r);var o=new XMLHttpRequest;o.open("GET",n.toDataURL("image/jpeg",1)),o.responseType="arraybuffer",o.onload=function(){var t=new Blob([o.response],{type:"image/png"});e(t)},o.send()},f=null,d=null,h=null;"true"!==c("isVisibleSend")&&$(".MdBtn01Send").hide();var p=c("whereToSend");$("img").css({opacity:.6}),$(document).off().on("mousemove",function(e){f=e,n.css("left",e.clientX),i.css("top",e.clientY)}),$(o).off().on("click",function(e){switch($(e.target).attr("class")){case"MdBtn01Save":"note"==p?chrome.runtime.sendMessage({msg:"sendGA",data:["Memos","Edit Memo","capture_save"]}):"message"==p&&chrome.runtime.sendMessage({msg:"sendGA",data:["Chatroom","capture","capture_save"]}),l(function(e){var t=new Date,n="line_"+t.getUTCFullYear()+u(t.getUTCMonth()+1)+u(t.getUTCDate())+"_"+u(t.getHours())+u(t.getMinutes())+u(t.getSeconds())+".png",i=URL.createObjectURL(e);chrome.downloads.download({url:i,filename:n},function(e){URL.revokeObjectURL(i)}),setTimeout(function(){window.close()},2e3)}),e.stopPropagation(),e.stopImmediatePropagation();break;case"MdBtn01Send":"note"==p?chrome.runtime.sendMessage({msg:"sendGA",data:["Memos","Edit Memo","capture_send"]}):"message"==p&&chrome.runtime.sendMessage({msg:"sendGA",data:["Chatroom","capture","capture_send"]}),l(function(e){var t=new window.FileReader;t.readAsDataURL(e),t.onloadend=function(){var e=t.result;chrome.runtime.sendMessage({msg:"completeCapture",data:e},function(e){}),window.close()}}),e.stopPropagation(),e.stopImmediatePropagation();break;case"MdBtn01Cancel":"note"==p?chrome.runtime.sendMessage({msg:"sendGA",data:["Memos","Edit Memo","capture_cancel"]}):"message"==p&&chrome.runtime.sendMessage({msg:"sendGA",data:["Chatroom","capture","capture_cancel"]}),o.hide(),e.stopPropagation(),e.stopImmediatePropagation(),d.release()}}),$("#capture").Jcrop({onChange:function(e){if(null!=f){"block"!=r.css("display")&&r.show();var t=Math.abs(e.x-f.clientX)>Math.abs(e.x2-f.clientX)?e.x2:e.x-60,n=Math.abs(e.y-f.clientY)>Math.abs(e.y2-f.clientY)?e.y2:e.y;r.css({left:s.left+t,top:s.top+(n-20)}).text(e.w+" / "+e.h),o.hide(),null===a&&(a=$(".jcrop-holder > div  img")),a.css({opacity:1})}},onSelect:function(e){if(null!=f){var t=window.innerWidth,n=window.innerHeight;h=e,r.hide();var i=0,s=0,c=f.clientX<e.x2&&0<=e.x-126,u=f.clientY<e.y2&&0<=e.y-36,l=f.clientX>e.x&&f.clientX+126<t,d=f.clientY>e.y&&f.clientY+36+20<n,p=f.clientX<=e.x&&f.clientX<e.x2,g=f.clientY<=e.y&&f.clientY<e.y2;p&&g&&c&&u?(i=e.x,s=e.y-36-2):p&&g&&c&&!u?(i=e.x-126,s=e.y+2):p&&g&&!c&&!u?(i=e.x,s=e.y+2):p&&g&&!c&&u?(i=e.x,s=e.y-36-2):p&&!g&&c&&d?(i=e.x,s=e.y2+2):p&&!g&&c&&!d?(i=e.x-126,s=e.y2-36):!p||g||c||d?p&&!g&&!c&&d?(i=e.x,s=e.y2+2):!p&&g&&l&&u?(i=e.x2-126,s=e.y-36-2):!p&&g&&l&&!u?(i=e.x2-126,s=e.y-2):!p&&g&&!l&&u?(i=e.x2-126,s=e.y-36-2):p||!g||l||u?p||g||l||d?p||g||l||!d?p||g||!l||d?(i=e.x2-126,s=e.y2+2):(i=e.x2,s=e.y2-36-2):(i=e.x2-126,s=e.y2+2):(i=e.x2-126,s=e.y2-36-2):(i=e.x2-126,s=e.y):(i=e.x,s=e.y2-36),o.css({left:i,top:s}).show(),a.css({opacity:1})}},onRelease:function(){r.css("left",-999),o.css("left",-999),$(".jcrop-holder > img").css({opacity:.6})},cursor:"url(res/img/common/ico_cursor_crosshair.png) 12 12, crosshair",keySupport:!1},function(){d=this})}.bind(this))});
//# sourceMappingURL=WCjoN.js.map